### Step 12.3: Migration Runner
**Objective**: Test migration system.

This task has been broken down into granular subtasks:

1. [TASK-12.3.1](./12.3.1.md): Test ensureSchemaMigrationsTable() creates table when missing
2. [TASK-12.3.2](./12.3.2.md): Test ensureSchemaMigrationsTable() is idempotent
3. [TASK-12.3.3](./12.3.3.md): Test runMigrations() applies all migrations once
4. [TASK-12.3.4](./12.3.4.md): Test runMigrations() is idempotent on second call
5. [TASK-12.3.5](./12.3.5.md): Test migration failures are logged clearly

**Note**: Complete all subtasks in order (12.3.1 → 12.3.2 → 12.3.3 → 12.3.4 → 12.3.5). Each subtask is independently completable with its own Definition of Done.

**Original Tasks**:
1. Create `tests/migrations.test.ts`:
   - Add test: `ensureSchemaMigrationsTable()` creates table when missing
   - Add test: `ensureSchemaMigrationsTable()` is idempotent
   - Add test: `runMigrations()` applies all migrations once
   - Add test: `runMigrations()` is idempotent on second call
   - Add test: Migration failures are logged clearly
   - Use temp SQLite DB

**Tests**:
- Verify migration execution
- Verify idempotency
- Verify error handling

**Verification**:
- Tests pass
- Migrations are reliable

