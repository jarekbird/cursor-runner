# TASK-1.2.2: Add Test Scripts to package.json

**Section**: 1. Foundation & Test Infrastructure
**Subsection**: 1.2.2
**Task ID**: TASK-1.2.2
**Parent Task**: TASK-1.2

## Description

Add npm scripts to `package.json` for running different test types (unit, integration, E2E-lite) separately. This allows developers to run fast unit tests during development and full test suites when needed.

**Reference Implementation**: `virtual-assistant/cursor-runner/package.json`

## Current State

- `package.json` has basic test scripts (`test`, `test:watch`, `test:coverage`)
- No scripts exist for running test types separately
- Test files are not organized by type in directory structure (may need Jest config for this)

**Important**: This depends on test files being organized or Jest being configured to identify test types.

## Checklist

### Preparation and Setup

- [ ] Review current test scripts in `package.json`
- [ ] Review Jest documentation for test name patterns
- [ ] Decide on test file naming/organization strategy
- [ ] Review existing test files to understand current organization

### Implementation Steps

- [ ] Step 1: Configure Jest for test type detection
  - [ ] Option A: Use test file naming (e.g., `*.unit.test.ts`, `*.integration.test.ts`)
  - [ ] Option B: Use test directory structure (e.g., `tests/unit/`, `tests/integration/`)
  - [ ] Update `testMatch` patterns if using directory structure
- [ ] Step 2: Add unit test script
  - [ ] Add `test:unit` script that runs only unit tests
  - [ ] Use Jest's `--testNamePattern` or `--testPathPattern` to filter
- [ ] Step 3: Add integration test script
  - [ ] Add `test:integration` script for integration tests
- [ ] Step 4: Add E2E test script
  - [ ] Add `test:e2e` script for E2E-lite tests
- [ ] Step 5: Add convenience scripts
  - [ ] Add `test:all` that runs all test types
  - [ ] Verify `test:watch` works with test type filtering

### Specific Requirements

- [ ] Requirement 1: Test scripts must run correct test types
  - Acceptance: `test:unit` only runs unit tests
  - Acceptance: `test:integration` only runs integration tests
  - Acceptance: `test:e2e` only runs E2E tests
- [ ] Requirement 2: Scripts must be fast for development
  - Acceptance: `test:unit` runs quickly (no external dependencies)
  - Acceptance: `test:watch` can filter by test type
- [ ] Requirement 3: All tests can be run together
  - Acceptance: `test:all` runs all test types
  - Acceptance: `npm test` still works (runs all tests)

### Error Handling and Edge Cases

- [ ] Handle edge case 1: Test files that don't match any type
  - Should be included in `test:all` and `npm test`
- [ ] Handle edge case 2: Watch mode with test types
  - Watch mode should work with type filtering

### Testing

- [ ] Test: `npm run test:unit` runs only unit tests
- [ ] Test: `npm run test:integration` runs only integration tests
- [ ] Test: `npm run test:e2e` runs only E2E tests
- [ ] Test: `npm run test:all` runs all tests
- [ ] Test: `npm test` still works (runs all tests)
- [ ] Test: `npm run test:watch` works with type filtering
- [ ] Run type checking: `npm run type-check`
- [ ] Run linting: `npm run lint`
- [ ] **DO NOT manually test by running the server** - verify scripts work

### Documentation

- [ ] Update `package.json` script comments (if supported)
- [ ] Document test type organization strategy
- [ ] Update README with test script usage (if README exists)

### Verification

- [ ] Verify all test scripts execute without errors
- [ ] Verify scripts run correct test types
- [ ] Verify no regressions in existing test workflow

## Notes

- This task is part of Phase 1: Foundation & Test Infrastructure
- **Execution Timing**: Must be completed after TASK-1.2.1 (Jest config)
- **Dependencies**: TASK-1.2.1
- **Important Considerations**: 
  - Test file organization strategy should be consistent
  - Consider future test organization needs
  - Scripts should be intuitive for developers
- **Task Independence**: Depends on Jest configuration

## Related Tasks

- Previous: TASK-1.2.1
- Next: TASK-2.1.1
- Dependencies: TASK-1.2.1
- Related:
  - TASK-1.2: Test Configuration & Coverage Setup (parent task)
  - All test implementation tasks (will use these scripts)

## Definition of Done

This task involves CONFIGURATION changes.

**Definition of Done**: 
1. Test scripts are added to `package.json`
2. Jest is configured to identify test types (if needed)
3. All test scripts execute correctly
4. Scripts run appropriate test types
5. Code is committed to git with descriptive commit message
6. Code is pushed to origin

**User Stories**:
- As a **developer**, I want to run only unit tests during development so I get fast feedback
- As a **developer**, I want to run integration tests separately so I can test specific layers
- As a **CI system**, I want to run all test types so I can verify everything works

**Automated Tests**:
- Verify `test:unit` script works: `npm run test:unit`
- Verify `test:integration` script works: `npm run test:integration`
- Verify `test:e2e` script works: `npm run test:e2e`
- Verify `test:all` script works: `npm run test:all`
- All scripts must execute successfully












