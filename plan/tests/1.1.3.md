# TASK-1.1.3: Create createMockCursorCLI() Helper

**Section**: 1. Foundation & Test Infrastructure
**Subsection**: 1.1.3
**Task ID**: TASK-1.1.3
**Parent Task**: TASK-1.1

## Description

Create a fully mocked `CursorCLI` instance with all methods stubbed. This helper will be used in tests that need to verify CursorCLI interactions without actually spawning cursor-cli processes.

**Reference Implementation**: `virtual-assistant/cursor-runner/src/cursor-cli.ts` (CursorCLI class)

## Current State

- `CursorCLI` class exists with methods: `executeCommand()`, `validate()`, `getQueueStatus()`, `extractFilesFromOutput()`
- Tests currently create partial mocks or use real CursorCLI instances
- No standardized mock helper exists

## Checklist

### Preparation and Setup

- [ ] Review `CursorCLI` class to identify all public methods
- [ ] Review method signatures and return types
- [ ] Review existing tests that mock CursorCLI

### Implementation Steps

- [ ] Step 1: Create function signature
  - [ ] Add `createMockCursorCLI()` to `tests/test-utils.ts`
  - [ ] Return type: `Partial<CursorCLI>` or custom mock interface
  - [ ] Add JSDoc comments
- [ ] Step 2: Implement all CursorCLI methods
  - [ ] `executeCommand(args: string[]): Promise<CommandResult>`
  - [ ] `validate(): Promise<boolean>`
  - [ ] `getQueueStatus(): { available: number; waiting: number; maxConcurrent: number }`
  - [ ] `extractFilesFromOutput(output: string): string[]`
- [ ] Step 3: Make methods configurable
  - [ ] Allow overriding return values
  - [ ] Allow simulating errors
  - [ ] Track method calls for verification

### Specific Requirements

- [ ] Requirement 1: All CursorCLI methods must be mocked
  - Acceptance: Every public method has a mock implementation
- [ ] Requirement 2: Methods must be configurable
  - Acceptance: Can set return values per test
  - Acceptance: Can simulate errors
- [ ] Requirement 3: Call tracking for verification
  - Acceptance: Can verify methods were called with expected arguments

### Testing

- [ ] Write unit tests
  - [ ] Test: Returns mock with all methods
  - [ ] Test: Methods return configurable values
  - [ ] Test: Can simulate errors
  - [ ] Test: Tracks method calls
- [ ] Run full test suite: `npm test`
- [ ] Run type checking: `npm run type-check`
- [ ] Run linting: `npm run lint`

### Documentation

- [ ] Add JSDoc with usage examples
- [ ] Document configuration options

### Verification

- [ ] Verify all methods are mocked
- [ ] Verify methods are configurable
- [ ] Verify call tracking works

## Notes

- **Dependencies**: None
- **Task Independence**: Can be done independently

## Related Tasks

- Previous: TASK-1.1.2
- Next: TASK-1.1.4
- Dependencies: None
- Related: TASK-9.3, TASK-10.1 (will use this helper)

## Definition of Done

**Definition of Done**: 
1. `createMockCursorCLI()` implemented
2. Unit tests written and passing
3. All checks pass
4. Code committed and pushed to origin

**User Stories**:
- As a **test developer**, I want a CursorCLI mock so I can test without spawning real processes
- As a **test developer**, I want to configure mock behavior so I can test different scenarios

**Automated Tests**:
- Tests verify all methods are mocked
- Tests verify configurability
- All tests pass
