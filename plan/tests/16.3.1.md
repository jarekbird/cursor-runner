# TASK-16.3.1: Update package.json scripts for test organization

**Section**: 16. Shell Script Integration & CI
**Subsection**: 16.3.1
**Task ID**: TASK-16.3.1
**Parent Task**: TASK-16.3

## Description

Update `package.json` scripts to ensure `test:unit`, `test:integration`, `test:e2e`, and `test:smoke` are properly configured. Verify scripts work in CI environment. This ensures test organization is correct.

**Reference Implementation**: `virtual-assistant/cursor-runner/package.json` (scripts section)

## Current State

- `package.json` exists
- Some test scripts may exist
- Scripts may need updates for proper organization
- CI compatibility may need verification

**Important**: This task ensures test scripts are properly organized.

## Checklist

### Preparation and Setup

- [ ] Review current `package.json` scripts
- [ ] Review Jest configuration
- [ ] Review test file organization
- [ ] Review CI environment requirements

### Implementation Steps

- [ ] Step 1: Review current scripts
  - [ ] Check existing test scripts in package.json
  - [ ] Identify what needs to be added or updated
- [ ] Step 2: Update package.json scripts
  - [ ] Ensure `test:unit` runs only unit tests (fast, no external dependencies)
  - [ ] Ensure `test:integration` runs integration tests (may use temp files/DBs)
  - [ ] Ensure `test:e2e` runs E2E-lite tests
  - [ ] Ensure `test:smoke` runs opt-in smoke tests
  - [ ] Ensure `test:all` runs all tests
  - [ ] Ensure `test:watch` works for development
- [ ] Step 3: Verify script configuration
  - [ ] Verify scripts use correct Jest patterns
  - [ ] Verify scripts work in local environment
  - [ ] Verify scripts work in CI environment (if possible)
- [ ] Step 4: Verify scripts work
  - [ ] Run each script individually
  - [ ] Assert scripts execute correctly
  - [ ] Assert correct tests are run

### Specific Requirements

- [ ] Requirement 1: Scripts are properly configured
  - Acceptance: All test scripts exist and work
  - Acceptance: Scripts run correct test types
- [ ] Requirement 2: CI compatibility
  - Acceptance: Scripts work in CI environment
  - Acceptance: No CI-specific issues
- [ ] Requirement 3: Scripts are documented
  - Acceptance: Script purposes are clear

### Error Handling and Edge Cases

- [ ] Handle edge case 1: No tests match pattern (verify graceful handling)

### Testing

- [ ] Update `package.json` scripts
- [ ] Run each script: `npm run test:unit`, `npm run test:integration`, etc.
- [ ] Verify scripts work correctly
- [ ] Run full test suite: `npm test`
- [ ] Run type checking: `npm run type-check`
- [ ] Run linting: `npm run lint`
- [ ] **DO NOT manually test by running the server** - use automated tests

### Documentation

- [ ] Add comments in package.json explaining script purposes
- [ ] Document script usage

### Verification

- [ ] Verify scripts work correctly
- [ ] Verify CI compatibility
- [ ] Verify no regressions

## Notes

- This task is part of Phase 16: Shell Script Integration & CI
- **Execution Timing**: Must be completed after TASK-16.2.1
- **Dependencies**: TASK-16.2.1
- **Important Considerations**: 
  - Scripts should be organized by test type
  - Should work in both local and CI environments
- **Task Independence**: Can be done after TASK-16.2.1

## Related Tasks

- Previous: TASK-16.2.1
- Next: TASK-16.3.2
- Dependencies: TASK-16.2.1
- Related:
  - TASK-16.3: CI Configuration & Coverage Thresholds (parent task)

## Definition of Done

**Definition of Done**: 
1. package.json scripts are updated
2. All test scripts work correctly
3. CI compatibility is verified
4. All checks pass (test, type-check, lint)
5. Code is committed to git with descriptive commit message
6. Code is pushed to origin

**User Stories**:
- As a **developer**, I want organized test scripts so I can run specific test types
- As a **CI**, I want proper scripts so tests run correctly

**Automated Tests**:
- Scripts are verified to work
- All scripts execute correctly








